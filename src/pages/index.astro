---
import Layout from "../layouts/Layout.astro";
import Progress from "../components/Progress.astro";
import Airtable from "airtable";

const apiKey = import.meta.env.AIRTABLE_API_KEY;

const airtableMock = (() => {
  return {
    select: () => airtableMock("bruh"),
    all: () => [{ get: () => 69420 }],
  };
}) as unknown as ReturnType<Airtable["base"]>;

const base =
  import.meta.env.MODE !== "development" || apiKey
    ? new Airtable({ apiKey: import.meta.env.AIRTABLE_API_KEY }).base(
        import.meta.env.AIRTABLE_BASE_ID
      )
    : airtableMock;

const goalAmount = 100000;

async function getSponsoredAmount() {
  let amount = 0;
  const records = await base("sponsors").select().all();

  records.forEach((record) => {
    amount += +(record.get("Amount") ?? 0);
  });

  return amount;
}

async function getInvididualSponsor() {
  const records = await base("sponsors")
    .select({
      filterByFormula: "{Type} = 'üëÄ¬†Individual Sponsorship'",
    })
    .all();

  return records.map((record) => ({
    name: record.get("Name"),
  }));
}

const progress = ((await getSponsoredAmount()) / goalAmount) * 100;
---

<Layout
  title="The ‡πÇ‡∏á‡πà Hackathon ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 7 ‡πÄ‡πÄ‡∏´‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® Thailand"
  description="‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡∏µ‡∏°‡∏≤‡∏ï‡∏•‡∏≠‡∏î‡πÉ‡∏ô The Stupid Hackathon Thailand ‡∏ó‡∏±‡πâ‡∏á 6 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á, ‡∏õ‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏±‡∏ö The ‡πÇ‡∏á‡πà Hackathon ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 7 ‡πÅ‡∏´‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® Thailand!"
>
  <main class="flex flex-col items-center gap-4 px-16">
    <section
      class="flex min-h-screen flex-col items-center justify-center gap-4"
    >
      <img
        src="/7/assets/hand.svg"
        alt="hand"
        class="absolute left-0 top-6 -z-10 w-16 lg:w-40 xl:w-fit"
      />
      <img
        src="/7/assets/handandflower.svg"
        alt="handandflower"
        class="absolute right-0 top-6 -z-10 w-52 lg:w-60 xl:w-fit"
      />
      <img
        src="/7/assets/handandflower2.svg"
        alt="flower"
        class="absolute bottom-0 left-0 -z-10 w-32 lg:w-48 xl:w-fit"
      />
      <img
        src="/7/assets/jar.svg"
        alt="jar"
        class="absolute bottom-0 right-0 -z-10 w-28 lg:w-48 xl:w-fit"
      />

      <h1
        class="mb-10 text-4xl font-bold leading-relaxed lg:text-center lg:text-6xl"
      >
        The ‡πÇ‡∏á‡πà Hackathon ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 7<br />‡πÄ‡πÄ‡∏´‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® Thailand
      </h1>
      <Progress value={progress} />
      <p class="text-center text-2xl lg:text-4xl">
        ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à {progress.toFixed(3)}%
      </p>
      <p class="hidden text-center lg:block">
        To make this event happens, we need your money ü´µ.
      </p>
      <p class="text-center">
        Visit this <a
          class="underline"
          href="https://creatorsgarten.org/wiki/Sponsorship/sht7">link</a
        > to sponsor us.
      </p>
    </section>
    <section class="pb-32 pt-20 text-lg lg:px-20">
      <h2 class="text-3xl font-bold">The Stupid Hackathon ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£</h2>
      <div class="flex flex-col items-center justify-center">
        <br />
        <p>
          Stupid Hackathon ‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô Hackathon ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏ó‡∏±‡πà‡∏ß‡∏ó‡∏∏‡∏Å‡∏°‡∏∏‡∏°‡πÇ‡∏•‡∏Å ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô
          New York ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ, San Francisco, Rhode Island,
          Canada, Netherlands, Germany, Austria, Sweden, Norway, Hawaii, UK,
          Shanghai, Singapore (‡πÄ‡∏¢‡∏≠‡∏∞‡∏°‡∏≤‡∏Å‡∏Å‡∏Å) ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢‡∏î‡πâ‡∏ß‡∏¢!
        </p>
        <br />
        <p>
          The Stupid Hackathon in Thailand ‡πÄ‡∏õ‡πá‡∏ô hackathon
          ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡πÉ‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô
          ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡πà‡∏≤ makers ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏™‡∏ô‡∏∏‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô
          project ‡∏ö‡πâ‡∏≤ ‡πÜ ‡∏ö‡∏≠ ‡πÜ ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ ‡πÑ‡∏°‡πà‡πÄ‡∏ô‡πâ‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ß‡πà‡∏≤ product
          ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏´‡∏° ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏™‡∏ô‡∏∏‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏Å‡πá‡∏û‡∏≠
        </p>
        <a
          class="my-8 rounded-full bg-rose-500 px-4 py-2 font-bold text-white hover:bg-rose-700"
          href="https://www.eventpop.me/e/15113/sht7"
        >
          Join Us
        </a>
      </div>
    </section>
    <section></section>
    <section>
      <div class="flex flex-col gap-4 pb-32">
        <h2 class="text-bold text-center text-5xl leading-normal">
          <p>Hall of</p>
          <p>‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏¢‡∏®</p>
        </h2>

        <div class="grid grid-cols-2 gap-4 lg:grid-cols-3 lg:gap-16">
          <img
            src="/7/assets/hackth.jpg"
            alt="Hackathon Thailand"
            class="h-24 w-24 rounded-full lg:h-32 lg:w-32"
          />
          <img
            src="/7/assets/thumb.jpeg"
            alt="Thumb"
            class="h-24 w-24 rounded-full lg:h-32 lg:w-32"
          />
          <img
            src="/7/assets/prog-th.png"
            alt="Programming.in.th"
            class="h-24 w-24 rounded-full lg:h-32 lg:w-32"
          />
        </div>
      </div>

      <img
        src="/7/assets/hand2.svg"
        alt="hand"
        class="absolute left-0 -z-10 w-32 lg:w-40 xl:w-fit"
      />
    </section>

    <section class="flex flex-col items-center justify-center gap-4 py-16">
      <h2 class="text-bold text-center text-5xl">
        <p>Hall of</p>
        <p>‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢</p>
      </h2>

      <div
        class="grid grid-cols-2 gap-4 pt-14 text-center lg:grid-cols-3 lg:gap-x-32 lg:gap-y-8"
      >
        {
          getInvididualSponsor().then((e) =>
            e.map((e) => <div class="mx-auto">{e.name}</div>)
          )
        }
      </div>
      <img src="/7/assets/weirdhooman.svg" alt="hooman" class="mt-64 w-24" />

      <a href="https://creatorsgarten.org" target="_blank" class="mt-32">
        <p class="mb-4">Organized by:</p>
        <img src="/7/assets/creators-logo.svg" alt="logo" class="w-32" />
      </a>
    </section>
  </main>
</Layout>
